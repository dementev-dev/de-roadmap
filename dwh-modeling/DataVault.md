# **Data Vault 2.0: –∫–∞–∫ —Å–æ–±—Ä–∞—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä**

## üìö –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ó–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–µ–Ω Data Vault?](#1-–∑–∞—á–µ–º-–≤–æ–æ–±—â–µ-–Ω—É–∂–µ–Ω-data-vault)
2. [–ò–Ω—Ç—É–∏—Ü–∏—è: DV –∫–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Lego](#2-–∏–Ω—Ç—É–∏—Ü–∏—è-dv-–∫–∞–∫-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä-lego)
3. [–¢—Ä–∏ —Ç–∏–ø–∞ —Ç–∞–±–ª–∏—Ü –≤ Data Vault 2.0](#3-—Ç—Ä–∏-—Ç–∏–ø–∞-—Ç–∞–±–ª–∏—Ü-–≤-data-vault-20)
4. [–¢–∏–ø—ã —Å–∞—Ç–µ–ª–ª–∏—Ç–æ–≤ –≤ DV 2.0](#4-—Ç–∏–ø—ã-—Å–∞—Ç–µ–ª–ª–∏—Ç–æ–≤-–≤-dv-20)
5. [Raw Vault –∏ Business Vault](#5-raw-vault-–∏-business-vault)
6. [–ü—Ä–∏–º–µ—Ä: –∫–ª–∏–µ–Ω—Ç –∏ –∑–∞–∫–∞–∑—ã –≤ DV-—Å—Ç–∏–ª–µ](#6-–ø—Ä–∏–º–µ—Ä-–∫–ª–∏–µ–Ω—Ç-–∏-–∑–∞–∫–∞–∑—ã-–≤-dv-—Å—Ç–∏–ª–µ)
7. [–ö–∞–∫ —ç—Ç–æ –∂–∏–≤—ë—Ç –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –∑–∞–≥—Ä—É–∑–∫–∏](#7-–∫–∞–∫-—ç—Ç–æ-–∂–∏–≤—ë—Ç-–≤-–ø–∞–π–ø–ª–∞–π–Ω–µ-–∑–∞–≥—Ä—É–∑–∫–∏)
8. [–ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã Data Vault](#8-–ø–ª—é—Å—ã-–∏-–º–∏–Ω—É—Å—ã-data-vault)
9. [–ö–æ–≥–¥–∞ DV —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∞ –∫–æ–≥–¥–∞ –Ω–µ—Ç](#9-–∫–æ–≥–¥–∞-dv-—Å—Ç–æ–∏—Ç-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-–∞-–∫–æ–≥–¥–∞-–Ω–µ—Ç)

---

## 1. –ó–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–µ–Ω Data Vault?

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–Ω–∞–∫–æ–º—è—Ç—Å—è —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏ —á–µ—Ä–µ–∑ –¥–≤–µ –º–æ–¥–µ–ª–∏:

* **3NF** (–ò–Ω–º–æ–Ω) ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —è–¥—Ä–æ: –º–Ω–æ–≥–æ —Ç–∞–±–ª–∏—Ü, —Å—Ç—Ä–æ–≥–∏–µ —Å–≤—è–∑–∏, –º–∏–Ω–∏–º—É–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
* **–ó–≤–µ–∑–¥–∞ (Star Schema)** (–ö–∏–º–±–∞–ª–ª) ‚Äî –≤–∏—Ç—Ä–∏–Ω—ã –ø–æ–¥ –æ—Ç—á—ë—Ç—ã: —Ñ–∞–∫—Ç + –Ω–µ—Å–∫–æ–ª—å–∫–æ ¬´–ø–ª–æ—Å–∫–∏—Ö¬ª –∏–∑–º–µ—Ä–µ–Ω–∏–π.

–≠—Ç–æ–≥–æ —Ö–≤–∞—Ç–∞–µ—Ç –¥–ª—è:

* 2‚Äì5 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤,
* –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å—Ö–µ–º,
* –∑–∞–¥–∞—á —Ç–∏–ø–∞ ¬´—Å–¥–µ–ª–∞—Ç—å –æ—Ç—á—ë—Ç –¥–ª—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞/—Ñ–∏–Ω–∞–Ω—Å–æ–≤¬ª.

–ü—Ä–æ–±–ª–µ–º—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞:

* –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ **—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–µ—Å—è—Ç–æ–∫ –∏ –±–æ–ª—å—à–µ** (CRM, –±–∏–ª–ª–∏–Ω–≥, ERP, —Å–∞–π—Ç, –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–∞—Ä—Ç–Ω—ë—Ä—ã, —Å–∫–æ—Ä–∏–Ω–≥–∏‚Ä¶);
* —Å—Ö–µ–º—ã **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è—é—Ç—Å—è**: –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—è, —Å—É—â–Ω–æ—Å—Ç–∏, –Ω–æ–≤—ã–µ —Å–≤—è–∑–∏;
* –ø–æ—è–≤–ª—è—é—Ç—Å—è –∂—ë—Å—Ç–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ **–∞—É–¥–∏—Ç—É –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–µ**: ¬´–ø–æ–∫–∞–∂–∏—Ç–µ, –æ—Ç–∫—É–¥–∞ –≤–∑—è–ª—Å—è –≤–æ—Ç —ç—Ç–æ—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å, –ø–æ —à–∞–≥–∞–º¬ª.

–í–æ—Ç —Ç—É—Ç –æ–±—ã—á–Ω–∞—è 3NF/–ó–≤–µ–∑–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–∫—Ä–∏–ø–µ—Ç—å:

* –ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ ‚Üí –±–æ–ª—å–Ω–æ –ø–æ —è–¥—Ä—É –∏ –≤–∏—Ç—Ä–∏–Ω–∞–º;
* –∏—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–º–∞–∑–∞–Ω–∞ –ø–æ —Ä–∞–∑–Ω—ã–º –º–µ—Å—Ç–∞–º (–≥–¥–µ-—Ç–æ SCD, –≥–¥–µ-—Ç–æ –ª–æ–≥-—Ç–∞–±–ª–∏—Ü—ã, –≥–¥–µ-—Ç–æ –≤–æ–æ–±—â–µ –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏);
* –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –º–∏–Ω–∏-–ø—Ä–æ–µ–∫—Ç –Ω–∞ –º–µ—Å—è—Ü.

**Data Vault 2.0** –æ—Ç–≤–µ—á–∞–µ—Ç –∏–º–µ–Ω–Ω–æ –Ω–∞ —ç—Ç—É –±–æ–ª—å:

> –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã **–Ω–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫** ‚Üí —ç—Ç–æ –Ω–µ ¬´—Ä–µ–º–æ–Ω—Ç –≤—Å–µ–≥–æ –¥–æ–º–∞¬ª, –∞ –ø—Ä–æ—Å—Ç–æ ¬´–¥–æ–∫—Ä—É—Ç–∏—Ç—å –µ—â—ë –æ–¥–∏–Ω –º–æ–¥—É–ª—å¬ª?

---

## 2. –ò–Ω—Ç—É–∏—Ü–∏—è: DV –∫–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Lego

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –º–µ—Ç–∞—Ñ–æ—Ä–∞ DV ‚Äî —ç—Ç–æ **–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–∑ —Ç—Ä—ë—Ö —Ç–∏–ø–æ–≤ –¥–µ—Ç–∞–ª–µ–π**:

* üî¥ **Hub (–•–∞–±)** ‚Äî *¬´–∫—Ç–æ/—á—Ç–æ —ç—Ç–æ¬ª*
  –°—É—â–Ω–æ—Å—Ç–∏: –∫–ª–∏–µ–Ω—Ç, –∑–∞–∫–∞–∑, –¥–æ–≥–æ–≤–æ—Ä, —Å—á—ë—Ç.
  –í–Ω—É—Ç—Ä–∏: –±–∏–∑–Ω–µ—Å‚Äë–∫–ª—é—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, customer_id –∏–ª–∏ contract_number) –∏ —Ç–µ—Ö–ø–æ–ª—è.

* ‚ö™ **Link (–õ–∏–Ω–∫)** ‚Äî *¬´–∫–∞–∫ –æ–Ω–∏ —Å–≤—è–∑–∞–Ω—ã¬ª*
  ¬´–ö–ª–∏–µ–Ω—Ç —Å–¥–µ–ª–∞–ª –∑–∞–∫–∞–∑¬ª, ¬´–¥–æ–≥–æ–≤–æ—Ä –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å—á—ë—Ç—É¬ª.
  –í–Ω—É—Ç—Ä–∏: —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ö–∞–±—ã –∏ —Ç–µ—Ö–ø–æ–ª—è.

* üü° **Satellite (–°–∞—Ç–µ–ª–ª–∏—Ç)** ‚Äî *¬´–∫–∞–∫–∏–µ —É –Ω–∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –∫–∞–∫ –æ–Ω–∏ –º–µ–Ω—è–ª–∏—Å—å¬ª*
  –ê—Ç—Ä–∏–±—É—Ç—ã —Å—É—â–Ω–æ—Å—Ç–∏ (–∏–º—è, email, —Å—Ç–∞—Ç—É—Å, —Ç–∞—Ä–∏—Ñ) –ø–ª—é—Å –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.

–ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è:

> **–ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å, —Å–≤—è–∑–∏ –∏ –∞—Ç—Ä–∏–±—É—Ç—ã –∂–∏–≤—É—Ç –æ—Ç–¥–µ–ª—å–Ω–æ.**
> –¢–æ–≥–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –Ω–µ –ª–æ–º–∞—é—Ç –¥—Ä—É–≥–æ–µ.

–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —ç—Ç–æ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–∞–∫:

```mermaid
erDiagram
    HUB_CUSTOMER ||--o{ SAT_CUSTOMER_INFO : –∏–º–µ–µ—Ç_–∞—Ç—Ä–∏–±—É—Ç—ã
    HUB_CUSTOMER ||--o{ LINK_ORDER_CUSTOMER : —É—á–∞—Å—Ç–≤—É–µ—Ç_–≤
    HUB_ORDER ||--o{ LINK_ORDER_CUSTOMER : —Å–æ–∑–¥–∞–Ω
    LINK_ORDER_CUSTOMER ||--o{ SAT_ORDER_STATUS : –∏–º–µ–µ—Ç_–∏—Å—Ç–æ—Ä–∏—é_—Å—Ç–∞—Ç—É—Å–æ–≤

    HUB_CUSTOMER {
        varchar customer_bk PK
        varchar record_source
        timestamp load_dttm
    }
    
    HUB_ORDER {
        varchar order_id PK
        varchar record_source
        timestamp load_dttm
    }
    
    LINK_ORDER_CUSTOMER {
        varchar link_key PK
        varchar order_id FK
        varchar customer_bk FK
        varchar record_source
        timestamp load_dttm
    }
    
    SAT_CUSTOMER_INFO {
        varchar customer_bk FK
        varchar hashdiff
        varchar name
        varchar email
        varchar city
        varchar record_source
        timestamp load_dttm
    }
    
    SAT_ORDER_STATUS {
        varchar link_key FK
        varchar hashdiff
        varchar status
        varchar record_source
        timestamp load_dttm
    }
```

–ö–∞–∫ —ç—Ç–æ —á–∏—Ç–∞—Ç—å:

* üî¥ HUB_CUSTOMER / HUB_ORDER ‚Äî ¬´—ç—Ç–æ—Ç –∫–ª–∏–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç¬ª, ¬´—ç—Ç–æ—Ç –∑–∞–∫–∞–∑ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç¬ª;
* ‚ö™ LINK_ORDER_CUSTOMER ‚Äî ¬´–∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –∑–∞–∫–∞–∑ —Å–¥–µ–ª–∞–ª –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –∫–ª–∏–µ–Ω—Ç¬ª;
* üü° SAT_‚Ä¶ ‚Äî –∫–∞–∫ –º–µ–Ω—è–ª–∏—Å—å –∞—Ç—Ä–∏–±—É—Ç—ã (email, —Å—Ç–∞—Ç—É—Å –∏ —Ç.–ø.) –≤–æ –≤—Ä–µ–º–µ–Ω–∏.

## 3. –¢—Ä–∏ —Ç–∏–ø–∞ —Ç–∞–±–ª–∏—Ü –≤ Data Vault 2.0

–ß—É—Ç—å –º–µ–Ω–µ–µ ¬´—Å–∫–∞–∑–æ—á–Ω–æ¬ª, —á—É—Ç—å –±–æ–ª–µ–µ —Ç–µ—Ö–Ω–∏—á–Ω–æ.

### 3.1. Hub ‚Äî —Å—É—â–Ω–æ—Å—Ç—å –∏ –µ—ë –±–∏–∑–Ω–µ—Å-–∫–ª—é—á

**Hub** —Å–æ–¥–µ—Ä–∂–∏—Ç:

* –±–∏–∑–Ω–µ—Å‚Äë–∫–ª—é—á (customer_bk, order_id, contract_number);
* —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
  * record_source ‚Äî –∏–∑ –∫–∞–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏—à–ª–∞ –ø–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å;
  * load_dttm ‚Äî –∫–æ–≥–¥–∞ –∑–∞–ø–∏—Å—å –ø–æ–ø–∞–ª–∞ –≤ DV;
  * –∏–Ω–æ–≥–¥–∞ ‚Äî —Ö—ç—à –±–∏–∑–Ω–µ—Å‚Äë–∫–ª—é—á–∞ (hk_customer).

–ì–ª–∞–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
* –æ–¥–∏–Ω –±–∏–∑–Ω–µ—Å‚Äë–∫–ª—é—á ‚Äî –æ–¥–∏–Ω —Ö–∞–± (–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–∞ —Å—É—â–Ω–æ—Å—Ç—å, –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏);
* —Ö–∞–± –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –∞—Ç—Ä–∏–±—É—Ç—ã (–∏–º—è, email) ‚Äî —Ç–æ–ª—å–∫–æ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å.

–ü—Ä–æ—Å—Ç–µ–π—à–∏–π DDL‚Äë—Å–∫–µ–ª–µ—Ç:

```sql
CREATE TABLE hub_customer (
    hk_customer     BYTEA        PRIMARY KEY,  -- —Ö—ç—à –æ—Ç BK
    customer_bk     VARCHAR(50)  NOT NULL,     -- business key
    record_source   VARCHAR(50)  NOT NULL,
    load_dttm       TIMESTAMP    NOT NULL
);
```

### 3.2. Link ‚Äî —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏

**Link** –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–∫—Ç —Å–≤—è–∑–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:

* –∑–∞–∫–∞–∑ ‚Üî –∫–ª–∏–µ–Ω—Ç;
* –¥–æ–≥–æ–≤–æ—Ä ‚Üî —Å—á—ë—Ç;
* –∫–∞—Ä—Ç–∞ ‚Üî –∫–ª–∏–µ–Ω—Ç.

–ü—Ä–∏–º–µ—Ä—ã –±–∏–∑–Ω–µ—Å‚Äë—Å–º—ã—Å–ª–æ–≤:

* link_order_customer ‚Äî ¬´—ç—Ç–æ—Ç –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —ç—Ç–æ–º—É –∫–ª–∏–µ–Ω—Ç—É¬ª;
* link_contract_account ‚Äî ¬´—ç—Ç–æ—Ç –¥–æ–≥–æ–≤–æ—Ä –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —ç—Ç–æ–º—É —Å—á—ë—Ç—É¬ª.

DDL‚Äë—ç—Å–∫–∏–∑:

```sql
CREATE TABLE link_order_customer (
    hk_order_customer  BYTEA PRIMARY KEY,
    hk_order           BYTEA NOT NULL,
    hk_customer        BYTEA NOT NULL,
    record_source      VARCHAR(50) NOT NULL,
    load_dttm          TIMESTAMP   NOT NULL
);
```

### 3.3. Satellite ‚Äî –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –∏—Å—Ç–æ—Ä–∏—è

**Satellite** —Ö—Ä–∞–Ω–∏—Ç:

* –∞—Ç—Ä–∏–±—É—Ç—ã —Ö–∞–±–∞ –∏–ª–∏ –ª–∏–Ω–∫–∞;
* –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —ç—Ç–∏—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤.

–ü—Ä–∏–º–µ—Ä—ã:

* sat_customer_info ‚Äî –∏–º—è, email, –≥–æ—Ä–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞;
* sat_customer_segment ‚Äî —Å–µ–≥–º–µ–Ω—Ç, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ä–∏—Å–∫‚Äë–ø—Ä–æ—Ñ–∏–ª—å;
* sat_order_status ‚Äî —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞.

–¢–∏–ø–∏—á–Ω—ã–µ –ø–æ–ª—è:

* —Å—Å—ã–ª–∫–∞ –Ω–∞ HUB –∏–ª–∏ LINK (hk_customer, hk_order_customer);
* –∞—Ç—Ä–∏–±—É—Ç—ã (email, city, status –∏ —Ç.–ø.);
* hashdiff ‚Äî —Ö—ç—à –æ—Ç –≤—Å–µ—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –ª–∏ —Å—Ç—Ä–æ–∫–∞;
* record_source, load_dttm ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ –º–æ–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤–µ—Ä—Å–∏–∏.

```sql
CREATE TABLE sat_customer_info (
    hk_customer    BYTEA      NOT NULL,
    hashdiff       BYTEA      NOT NULL,
    name           VARCHAR(100),
    email          VARCHAR(100),
    city           VARCHAR(50),
    record_source  VARCHAR(50) NOT NULL,
    load_dttm      TIMESTAMP   NOT NULL
);
```

–ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å: DV –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —è–≤–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å, —Å–≤—è–∑–∏ –∏ –∞—Ç—Ä–∏–±—É—Ç—ã —Å –∏—Å—Ç–æ—Ä–∏–µ–π. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –º–æ–¥–µ–ª—å —Å–ª–æ–∂–Ω–µ–µ –Ω–∞ –≤–∏–¥, –Ω–æ –≥–æ—Ä–∞–∑–¥–æ —É—Å—Ç–æ–π—á–∏–≤–µ–µ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

–ö–æ–≥–¥–∞ –Ω—É–∂–Ω—ã –∏–º–µ–Ω–Ω–æ –±–∏–∑–Ω–µ—Å-–ø–µ—Ä–∏–æ–¥—ã –¥–µ–π—Å—Ç–≤–∏—è (¬´—Å/–ø–æ¬ª), –∏—Ö —É–¥–æ–±–Ω–µ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–µ –≤ –±–∞–∑–æ–≤–æ–º —Å–∞—Ç–µ–ª–ª–∏—Ç–µ, –∞ –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ effectivity-—Å–∞—Ç–µ–ª–ª–∏—Ç–∞–º–∏ –∏–ª–∏ —á–µ—Ä–µ–∑ PIT-—Ç–∞–±–ª–∏—Ü—ã –≤ Business Vault.

## 4. –¢–∏–ø—ã —Å–∞—Ç–µ–ª–ª–∏—Ç–æ–≤ –≤ DV 2.0

–í DV 2.0 –ø–æ—è–≤–∏–ª–æ—Å—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ ¬´—Ä–æ–ª—è–º¬ª —Å–∞—Ç–µ–ª–ª–∏—Ç–æ–≤. –ì–ª–∞–≤–Ω–æ–µ, —á—Ç–æ —Å—Ç–æ–∏—Ç –∑–Ω–∞—Ç—å:

* **Descriptive Satellites** ‚Äî –æ–±—ã—á–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã (–∏–º—è, –∞–¥—Ä–µ—Å, —Ç–∞—Ä–∏—Ñ) —Å –∏—Å—Ç–æ—Ä–∏–µ–π.
* **Effectivity Satellites** ‚Äî —Ñ–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–∏–æ–¥–∞—Ö –¥–µ–π—Å—Ç–≤–∏—è (`valid_from` / `valid_to`), –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ SCD2.
* **Multi-Active Satellites** ‚Äî –∫–æ–≥–¥–∞ —É —Å—É—â–Ω–æ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞).
* **Transactional Satellites** ‚Äî —Å–æ–±—ã—Ç–∏—è, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –æ–¥–Ω–æ–º—É —Ö–∞–±—É/–ª–∏–Ω–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∂—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞).

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ DDL-¬´—à–∞–±–ª–æ–Ω—ã¬ª –ø–æ–≤–µ—Ä—Ö –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –∏–¥–µ–∏:
**–∞—Ç—Ä–∏–±—É—Ç—ã + –≤—Ä–µ–º—è ‚Üí –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—á–∫–∞.**

---

## 5. Raw Vault –∏ Business Vault

–û–±—ã—á–Ω–æ –ø–æ–¥ ¬´Data Vault¬ª –ª—é–¥–∏ —Å–º–µ—à–∏–≤–∞—é—Ç –¥–≤–∞ —Å–ª–æ—è:

```mermaid
flowchart LR
    SRC[–ò—Å—Ç–æ—á–Ω–∏–∫–∏] --> STG[STG / ODS]
    STG --> RAW[Raw Vault
Hubs, Links, Sats]
    RAW --> BV[Business Vault
PIT, Bridge, Derived]
    BV --> DM[Data Marts
Star Schema]
    DM --> BI[BI / ML]
```

* **Raw Vault** ‚Äî —ç—Ç–æ –ø—Ä–æ –ø—Ä–∏—ë–º –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª, –Ω–æ —É–∂–µ –≤ —Ñ–æ—Ä–º–µ Hub / Link / Satellite.
* **Business Vault** ‚Äî —ç—Ç–æ –ø—Ä–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ–ª–µ–µ ¬´–¥–µ–ª–æ–≤–æ–π¬ª –≤–∏–¥: —Å –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º–∏, PIT/Bridge –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏.

### 5.1. Raw Vault ‚Äî ¬´–≤—Å—ë –ø—Ä–∏–ª–µ—Ç–µ–≤—à–µ–µ, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Ä–∞–∑–ª–æ–∂–µ–Ω–Ω–æ–µ –ø–æ —è—â–∏—á–∫–∞–º¬ª

Raw DV ‚Äî –ø–µ—Ä–≤—ã–π —Å–ª–æ–π –ø–æ–≤–µ—Ä—Ö STG / ODS:

* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫–ª—é—á–∏;
* —Ä–∞–∑–±–∏—Ä–∞–µ–º —Å—É—â–Ω–æ—Å—Ç–∏ –ø–æ Hub / Link / Sat;
* —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–µ —Ä–µ—à–∞—è –µ—â—ë, —á—Ç–æ —Ç–∞–∫–æ–µ ¬´–∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∏–µ–Ω—Ç¬ª –∏–ª–∏ ¬´—É—Å–ø–µ—à–Ω—ã–π –∑–∞–∫–∞–∑¬ª.

–•–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ —á–µ—Ä—Ç—ã Raw Vault:

* –º–∏–Ω–∏–º—É–º –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏:

  * –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤–∏–ª –≤—Ä–æ–¥–µ ¬´–∫–ª–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–µ–Ω, –µ—Å–ª–∏ –±—ã–ª–∞ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –ø–æ–∫—É–ø–∫–∞ –∑–∞ 90 –¥–Ω–µ–π¬ª;
* –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª, —Ç–æ–ª—å–∫–æ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ –æ–±—â–∏–º –∫–ª—é—á–∞–º;
* —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞: –¥–æ–±–∞–≤–∏–ª—Å—è –Ω–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ ‚Üí –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π Satellite –∫ —Ç–æ–º—É –∂–µ Hub.

### 5.2. Business Vault ‚Äî ¬´—Ç–∞–º, –≥–¥–µ –∏–∑ Lego —Å–æ–±–∏—Ä–∞—é—Ç –º–æ–¥—É–ª–∏¬ª

Business Vault (BV) ‚Äî —Å–ª–µ–¥—É—é—â–∏–π —Å–ª–æ–π –Ω–∞–¥ Raw DV:

* –∑–¥–µ—Å—å –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ (—á—Ç–æ —Å—á–∏—Ç–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º, –∫–∞–∫ —Ç—Ä–∞–∫—Ç–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å—ã);
* –∑–¥–µ—Å—å —Å—Ç—Ä–æ—è—Ç—Å—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

  * PIT-—Ç–∞–±–ª–∏—Ü—ã,
  * Bridge-—Ç–∞–±–ª–∏—Ü—ã,
  * –∞–≥—Ä–µ–≥–∞—Ç—ã –∏ derived-—Ç–∞–±–ª–∏—Ü—ã.

–ò–º–µ–Ω–Ω–æ –∏–∑ BV —á–∞—â–µ –≤—Å–µ–≥–æ —Å—Ç—Ä–æ—è—Ç—Å—è –≤–∏—Ç—Ä–∏–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ó–≤–µ–∑–¥—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è BI –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å.

–ï—Å–ª–∏ —Å–∏–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å:

* Raw DV ‚Üí ¬´–º—ã –≤—Å—ë —Å–æ–±—Ä–∞–ª–∏¬ª;
* Business DV ‚Üí ¬´–º—ã —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–∏ –≤ –≤–∏–¥, —Å –∫–æ—Ç–æ—Ä—ã–º —É–¥–æ–±–Ω–æ –∂–∏—Ç—å¬ª;
* DM ‚Üí ¬´–º—ã –≤—ã–Ω–µ—Å–ª–∏ —ç—Ç–æ –Ω–∞ –≤–∏—Ç—Ä–∏–Ω—É –≤ –ø–æ–Ω—è—Ç–Ω–æ–π —Ñ–æ—Ä–º–µ¬ª.

#### 5.2.1. PIT-—Ç–∞–±–ª–∏—Ü—ã (Point-in-Time)

PIT (Point-in-Time) —Ä–µ—à–∞–µ—Ç –æ—á–µ–Ω—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –±–æ–ª—å:

> ¬´–ü–æ–∫–∞–∂–∏, –∫–∞–∫ –æ–±—ä–µ–∫—Ç –≤—ã–≥–ª—è–¥–µ–ª **–Ω–∞ –¥–∞—Ç—É X**, –Ω–æ —Ç–∞–∫, —á—Ç–æ–±—ã –∑–∞–ø—Ä–æ—Å –±—ã–ª –ø—Ä–æ—Å—Ç—ã–º¬ª.

–ï—Å–ª–∏ —É –Ω–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∞—Ç–µ–ª–ª–∏—Ç–æ–≤ —Å –∏—Å—Ç–æ—Ä–∏–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sat_customer_info`, `sat_customer_segment`, `sat_customer_risk`), —Ç–æ –±–µ–∑ PIT –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ø–∞—á–∫—É —É—Å–ª–æ–≤–∏–π
`BETWEEN valid_from AND valid_to` –∏–ª–∏ –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

**–ò–¥–µ—è PIT:**

–ú—ã –∑–∞—Ä–∞–Ω–µ–µ —Å—á–∏—Ç–∞–µ–º ¬´—Å–ª–æ–≤–∞—Ä—å¬ª –≤–∏–¥–∞:

> –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã (–æ–±—ä–µ–∫—Ç, –¥–∞—Ç–∞) ‚Äî –∫–∞–∫–∏–µ –≤–µ—Ä—Å–∏–∏ —Å–∞—Ç–µ–ª–ª–∏—Ç–æ–≤ –Ω–∞ —ç—Ç—É –¥–∞—Ç—É –∞–∫—Ç—É–∞–ª—å–Ω—ã.

–£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```sql
CREATE TABLE pit_customer_daily (
    hk_customer     BYTEA,
    as_of_date      DATE,
    hk_sat_info     BYTEA,  -- sat_customer_info –Ω–∞ —ç—Ç—É –¥–∞—Ç—É
    hk_sat_segment  BYTEA,  -- sat_customer_segment –Ω–∞ —ç—Ç—É –¥–∞—Ç—É
    load_dttm       TIMESTAMP
);
```

–í–Ω—É—Ç—Ä–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

| hk_customer | as_of_date | hk_sat_info  | hk_sat_segment |
| ----------- | ---------- | ------------ | -------------- |
| 101         | 2023-06-10 | hash_info_v1 | hash_seg_v1    |
| 101         | 2023-06-11 | hash_info_v2 | hash_seg_v1    |
| 101         | 2023-06-12 | hash_info_v2 | hash_seg_v2    |

–î–∞–ª—å—à–µ –≤–∏—Ç—Ä–∏–Ω–∞ –ø—Ä–æ–¥–∞–∂ –≤–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω—ã—Ö `BETWEEN` –¥–µ–ª–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–π JOIN:

```sql
SELECT
    s.sale_date,
    s.amount,
    seg.segment,
    info.city
FROM fact_sales s
JOIN pit_customer_daily pit
  ON pit.hk_customer = s.hk_customer
 AND pit.as_of_date  = s.sale_date
JOIN sat_customer_segment seg
  ON seg.hk_customer = pit.hk_customer
 AND seg.hashdiff    = pit.hk_sat_segment
JOIN sat_customer_info info
  ON info.hk_customer = pit.hk_customer
 AND info.hashdiff    = pit.hk_sat_info;
```

–ú—ã **–æ–¥–∏–Ω —Ä–∞–∑** –¥–æ—Ä–æ–≥–æ –ø–æ—Å—á–∏—Ç–∞–ª–∏ PIT (–ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é),
–∏ –¥–∞–ª—å—à–µ –≤—Å–µ –≤–∏—Ç—Ä–∏–Ω—ã –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç—É ¬´—Å–ø—Ä–∞–≤–æ—á–Ω—É—é —Ç–∞–±–ª–∏—Ü—É¬ª.

–ö–æ—Ä–æ—Ç–∫–æ: **PIT ‚Äî —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞, –≥–¥–µ –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–ø–∏—Å–∞–Ω–æ, –∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞ –Ω–∞ –¥–∞—Ç—É X.**

#### 5.2.2. Bridge-—Ç–∞–±–ª–∏—Ü—ã

Bridge-—Ç–∞–±–ª–∏—Ü—ã –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –¥—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å:

> ¬´–ö–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã **–≤ –∏—Ç–æ–≥–µ** —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π —á–µ—Ä–µ–∑ –¥–ª–∏–Ω–Ω—É—é —Ü–µ–ø–æ—á–∫—É Links?¬ª

–í Data Vault —Å–≤—è–∑—å –º–µ–∂–¥—É –¥–≤—É–º—è —Å—É—â–Ω–æ—Å—Ç—è–º–∏ —Ä–µ–¥–∫–æ –±—ã–≤–∞–µ—Ç ¬´–æ–¥–Ω–∏–º JOIN‚Äô–æ–º¬ª. –ß–∞—â–µ —ç—Ç–æ —Ü–µ–ø–æ—á–∫–∞:

* –∫–ª–∏–µ–Ω—Ç ‚Üí –¥–æ–≥–æ–≤–æ—Ä ‚Üí —Å—á—ë—Ç ‚Üí –∫–∞—Ä—Ç–∞ ‚Üí —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è;
* –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ ‚Üí —Ñ–∏–ª–∏–∞–ª ‚Üí —Ç–æ—Ä–≥–æ–≤–∞—è —Ç–æ—á–∫–∞ ‚Üí —á–µ–∫;
* –∫–æ–º–ø–∞–Ω–∏—è ‚Üí –¥–æ—á–µ—Ä–Ω—è—è –∫–æ–º–ø–∞–Ω–∏—è ‚Üí –ø—Ä–æ–µ–∫—Ç ‚Üí –∫–æ–Ω—Ç—Ä–∞–∫—Ç ‚Üí –ø–ª–∞—Ç—ë–∂.

–ï—Å–ª–∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤ –≤–∏—Ç—Ä–∏–Ω–∞—Ö –ø–∏—Å–∞—Ç—å –≤—Å–µ —ç—Ç–∏ JOIN‚Äô—ã, –∑–∞–ø—Ä–æ—Å—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è:

* –¥–ª–∏–Ω–Ω—ã–º–∏ –∏ —Ö—Ä—É–ø–∫–∏–º–∏;
* –ø–ª–æ—Ö–æ —á–∏—Ç–∞–µ–º—ã–º–∏;
* –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –æ—Ç—á—ë—Ç–æ–≤.

**–ò–¥–µ—è Bridge:**

–°–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É, –≥–¥–µ –∑–∞—Ä–∞–Ω–µ–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å ¬´—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ¬ª –ø–∞—Ä—ã:

```sql
CREATE TABLE bridge_customer_trx (
    hk_customer  BYTEA,
    hk_trx       BYTEA
    -- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏—è —Å–≤—è–∑–∏, —Ç–∏–ø —Å–≤—è–∑–∏ –∏ —Ç.–ø.
);
```

–¢–∞–∫—É—é —Ç–∞–±–ª–∏—Ü—É –º—ã —Å—á–∏—Ç–∞–µ–º **–≤ ETL**, –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, –∞ –Ω–µ –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.
–£—Å–ª–æ–≤–Ω—ã–π –ø—Å–µ–≤–¥–æ–∫–æ–¥ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è:

```sql
INSERT INTO bridge_customer_trx (hk_customer, hk_trx)
SELECT DISTINCT
    c.hk_customer,
    t.hk_trx
FROM hub_customer c
JOIN link_customer_contract lcc    ON lcc.hk_customer = c.hk_customer
JOIN hub_contract ct               ON ct.hk_contract = lcc.hk_contract
JOIN link_contract_account lca     ON lca.hk_contract = ct.hk_contract
JOIN hub_account acc               ON acc.hk_account = lca.hk_account
JOIN link_account_card lac         ON lac.hk_account = acc.hk_account
JOIN hub_card card                 ON card.hk_card = lac.hk_card
JOIN link_card_trx lct             ON lct.hk_card = card.hk_card
JOIN hub_trx t                     ON t.hk_trx = lct.hk_trx;
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤–∏—Ç—Ä–∏–Ω–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ –≥–æ—Ç–æ–≤—ã–π Bridge:

```sql
SELECT
    c.customer_bk,
    SUM(t.amount) AS total_amount
FROM hub_customer c
JOIN bridge_customer_trx bct
  ON bct.hk_customer = c.hk_customer
JOIN hub_trx t
  ON t.hk_trx = bct.hk_trx
WHERE t.trx_date >= CURRENT_DATE - INTERVAL '30 day'
GROUP BY c.customer_bk;
```

–°–ª–æ–∂–Ω—ã–π –ø—É—Ç—å –ø–æ Links –º—ã —Å–ø—Ä—è—Ç–∞–ª–∏ –≤–Ω—É—Ç—Ä—å bridge‚Äë—Ç–∞–±–ª–∏—Ü—ã,
–∞ –≤–∏—Ç—Ä–∏–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø—Ä–æ—Å—Ç–æ–π —Å–≤—è–∑–∫–æ–π ¬´–∫–ª–∏–µ–Ω—Ç ‚Üî —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è¬ª.

–ö–æ—Ä–æ—Ç–∫–æ:

* **PIT** ‚Äî –ø—Ä–æ ¬´–∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –±—ã–ª–∞ –Ω–∞ –¥–∞—Ç—É X¬ª;
* **Bridge** ‚Äî –ø—Ä–æ ¬´–∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –≤ –∏—Ç–æ–≥–µ —Å–≤—è–∑–∞–Ω—ã –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –ø–æ –¥–ª–∏–Ω–Ω–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É¬ª.

Bridge ‚Äî —ç—Ç–æ **–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç DV**, –∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
–û–Ω –Ω—É–∂–µ–Ω —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ü–µ–ø–æ—á–∫–∏ Links —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–ª–∏–Ω–Ω—ã–º–∏ –∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö –æ—Ç—á—ë—Ç–∞—Ö.

#### 5.2.3. Business-–ø—Ä–∞–≤–∏–ª–∞ –∏ derived-—Ç–∞–±–ª–∏—Ü—ã Business-–ø—Ä–∞–≤–∏–ª–∞ –∏ derived-—Ç–∞–±–ª–∏—Ü—ã

–í BV –ª–æ–≥–∏—á–Ω–æ —Ä–∞–∑–º–µ—â–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è:

* –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö –æ—Ç—á—ë—Ç–∞—Ö;
* –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–∞.

–ü—Ä–∏–º–µ—Ä—ã:

* —Ñ–ª–∞–≥ ¬´–∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∏–µ–Ω—Ç¬ª, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∫—É–ø–æ–∫ –∏ –ª–æ–≥–∏–Ω–æ–≤;
* ¬´–æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞—Ä–∏—Ñ¬ª, –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ –Ω–∞–±–æ—Ä—É –ø—Ä–∞–≤–∏–ª –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤;
* ¬´—á–∏—Å—Ç—ã–π —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞¬ª, —Å–≤—ë—Ä–Ω—É—Ç—ã–π –∏–∑ —Ü–µ–ø–æ—á–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ (created ‚Üí paid ‚Üí shipped ‚Üí delivered / cancelled).

–≠—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ Satellites / Links, —Ç–∞–∫ –∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã BV —Å —É–∂–µ –ø–æ—Å—á–∏—Ç–∞–Ω–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏ –∏ –∞–≥—Ä–µ–≥–∞—Ç–∞–º–∏.

### 5.3. –ì—Ä–∞–Ω–∏—Ü–∞ –º–µ–∂–¥—É Business Vault –∏ –≤–∏—Ç—Ä–∏–Ω–∞–º–∏ (DM)

–í–∞–∂–Ω–æ –ø—Ä–æ–≥–æ–≤–æ—Ä–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—É:

* Business Vault ‚Äî –µ—â—ë –ø—Ä–æ –¥–∞–Ω–Ω—ã–µ –∏ –∏—Å—Ç–æ—Ä–∏—é;
* DM (Data Marts) ‚Äî —É–∂–µ –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –±–∏–∑–Ω–µ—Å-—Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —É–¥–æ–±—Å—Ç–≤–æ BI.

–í–∏—Ç—Ä–∏–Ω—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å, –Ω–µ —Ç—Ä–æ–≥–∞—è BV, –ø–æ–∫–∞ –≤—ã –Ω–µ –º–µ–Ω—è–µ—Ç–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞.

### 5.4. –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Å–≤—è–∑–∫–∞ Raw DV ‚Üí BV ‚Üí DM –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ

–ú–∏–Ω–∏-–ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞:

1. Raw Vault:

   * `hub_customer`, `hub_order`;
   * `link_order_customer`;
   * `sat_customer_info`, `sat_order_status`, `sat_customer_segment`.

2. Business Vault:

   * `pit_customer_daily` ‚Äî —Å—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –¥–Ω—è–º;
   * `bv_customer_flags` ‚Äî –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, VIP-—Å—Ç–∞—Ç—É—Å—ã, —Å–µ–≥–º–µ–Ω—Ç—ã;
   * `bridge_customer_order` ‚Äî —Å–≤—è–∑–∏ –∫–ª–∏–µ–Ω—Ç ‚Üî –∑–∞–∫–∞–∑ —Å —É–¥–æ–±–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏.

3. DM / Star Schema:

   * `dm.fact_sales` ‚Äî —Ñ–∞–∫—Ç –ø—Ä–æ–¥–∞–∂;
   * `dm.dim_customer` ‚Äî —É–∂–µ –ø–ª–æ—Å–∫–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Å –Ω—É–∂–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ (email_current, segment, is_active_90d –∏ —Ç.–ø.);
   * `dm.dim_date`, `dm.dim_product` –∏ –¥—Ä—É–≥–∏–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:

* Raw DV ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π, –∏—Å—Ç–æ—Ä–∏—á–Ω—ã–π –∏ –Ω–µ–∫—Ä–∞—Å–∏–≤—ã–π —Å–ª–æ–π;
* BV ‚Äî —Ä–∞–±–æ—á–∏–π —Å–ª–æ–π –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤;
* DM ‚Äî –ø—Ä–∏–≤—ã—á–Ω–∞—è –ó–≤–µ–∑–¥–∞ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö.

## 6. –ü—Ä–∏–º–µ—Ä: –∫–ª–∏–µ–Ω—Ç –∏ –∑–∞–∫–∞–∑—ã –≤ DV-—Å—Ç–∏–ª–µ

–í–æ–∑—å–º—ë–º –º–∏–Ω–∏‚Äë–ø—Ä–∏–º–µ—Ä –≤—Å—ë —Ç–æ–≥–æ –∂–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç‚Äë–º–∞–≥–∞–∑–∏–Ω–∞.

–£ –Ω–∞—Å –µ—Å—Ç—å:

* –∫–ª–∏–µ–Ω—Ç —Å `customer_id = 101`, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–Ω–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è email –∏ –≥–æ—Ä–æ–¥;
* –¥–≤–∞ –∑–∞–∫–∞–∑–∞: `order_id = 5001` –∏ `order_id = 5002`;
* —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤: `created ‚Üí paid ‚Üí shipped ‚Üí delivered`.

### –ß—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ Raw Vault

–í Data Vault —ç—Ç–æ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü:

* `hub_customer` ‚Äî –ø–æ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –Ω–∞ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ (BK = `customer_id`).
* `hub_order` ‚Äî –ø–æ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑ (BK = `order_id`).
* `link_order_customer` ‚Äî —Å–≤—è–∑—å ¬´–∫–∞–∫–æ–π –∑–∞–∫–∞–∑ —Å–¥–µ–ª–∞–ª –∫–∞–∫–æ–π –∫–ª–∏–µ–Ω—Ç¬ª.
* `sat_customer_info` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞ (–∏–º—è, email, –≥–æ—Ä–æ–¥).
* `sat_order_status` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–∞.

–ü—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏:

```text
HUB_CUSTOMER
--------------------------------------
customer_bk | record_source | load_dttm
--------------------------------------
101         | CRM           | 2023-01-10 10:00

SAT_CUSTOMER_INFO
customer_bk | load_dttm           | email              | city
---------------------------------------------------------------------
101         | 2023-01-10 10:00    | a@example.com      | Moscow
101         | 2023-06-01 09:00    | alice@newmail.com  | Moscow

HUB_ORDER
--------------------------------------
order_id    | record_source | load_dttm
--------------------------------------
5001        | SHOP          | 2023-06-10 12:00
5002        | SHOP          | 2023-06-11 09:30

SAT_ORDER_STATUS
order_id | load_dttm           | status
-------------------------------------------------------
5001     | 2023-06-10 12:00    | created
5001     | 2023-06-10 12:05    | paid
5001     | 2023-06-11 09:00    | shipped
...      | ...                 | ...
```

–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è: **–ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ** (email, —Å—Ç–∞—Ç—É—Å) ‚Äî —ç—Ç–æ **–Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞** –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º Satellite.

### –ö–∞–∫ –∏–∑ —ç—Ç–æ–≥–æ –ø–æ–ª—É—á–∏—Ç—å –≤–∏—Ç—Ä–∏–Ω—É –ø—Ä–æ–¥–∞–∂

–î–∞–ª—å—à–µ –Ω–∞–º –Ω—É–∂–Ω–æ –ø—Ä–∏–≤—ã—á–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ `dim_customer` –∏ —Ñ–∞–∫—Ç `fact_sales` –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ó–≤–µ–∑–¥—ã.

–û–±—ã—á–Ω–æ —Ü–µ–ø–æ—á–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

1. –í Business Vault —Å—Ç—Ä–æ–∏–º `PIT`‚Äë—Ç–∞–±–ª–∏—Ü—É –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º:

   * –¥–ª—è –∫–∞–∂–¥–æ–π –¥–∞—Ç—ã (–∏–ª–∏ –¥–Ω—è, –∏–ª–∏ —á–∞—Å–∞) –∑–Ω–∞–µ–º, –∫–∞–∫–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ `sat_customer_info` –±—ã–ª–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞.
2. –°—Ç—Ä–æ–∏–º –≤–∏—Ç—Ä–∏–Ω—É `dm.dim_customer`:

   * –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É –±–µ—Ä—ë–º –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é –∏–∑ `sat_customer_info`;
   * –¥–æ–±–∞–≤–ª—è–µ–º —Ñ–ª–∞–≥–∏/—Å–µ–≥–º–µ–Ω—Ç—ã –∏–∑ –¥—Ä—É–≥–∏—Ö Satellites/BV‚Äë—Ç–∞–±–ª–∏—Ü.
3. –°—Ç—Ä–æ–∏–º —Ñ–∞–∫—Ç `dm.fact_sales`, –≥–¥–µ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî –∑–∞–∫–∞–∑ –∏–ª–∏ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫–∞–∑–∞.

–ò—Ç–æ–≥: –Ω–∞ –≤–∏—Ç—Ä–∏–Ω–µ –º—ã –≤–∏–¥–∏–º ¬´–ø–ª–æ—Å–∫–æ–≥–æ¬ª –∫–ª–∏–µ–Ω—Ç–∞ (–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ ‚Üí —Ç–µ–∫—É—â–µ–µ –∏–º—è/–≥–æ—Ä–æ–¥/email –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∞),
—Ö–æ—Ç—è –≤–Ω—É—Ç—Ä–∏ DV –ª–µ–∂–∏—Ç –ø–æ–ª–Ω–∞—è, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Ä–∞–∑–ª–æ–∂–µ–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è.

## 7. –ö–∞–∫ —ç—Ç–æ –∂–∏–≤—ë—Ç –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –∑–∞–≥—Ä—É–∑–∫–∏

–ü–æ—Å–º–æ—Ç—Ä–∏–º —Ç–µ–ø–µ—Ä—å, –∫–∞–∫ DV –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –æ–±—ã—á–Ω—ã–π ETL/ELT‚Äë–ø–∞–π–ø–ª–∞–π–Ω.

–¢–∏–ø–∏—á–Ω—ã–π –ø–æ—Ç–æ–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

1. **STG / ODS ‚Äî –ø—Ä–∏—ë–º –∏ –ø–µ—Ä–≤–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**

   * –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º (CRM, –±–∏–ª–ª–∏–Ω–≥, —Å–∞–π—Ç, –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –≤—ã–≥—Ä—É–∑–∫–∏).
   * –ó–∞–±–∏—Ä–∞–µ–º –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã (CDC, –≤—ã–≥—Ä—É–∑–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, API).
   * –ü—Ä–∏–≤–æ–¥–∏–º —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, —á–∏—Å—Ç–∏–º –æ—á–µ–≤–∏–¥–Ω—ã–π –º—É—Å–æ—Ä, –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞—Ç –∏ —Ç.–ø.

2. **Raw Vault ‚Äî –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ –≤ Hub / Link / Satellite**

   * –ò–∑ STG/ODS —Å—á–∏—Ç–∞–µ–º —Ö—ç—à‚Äë–∫–ª—é—á–∏ –¥–ª—è –±–∏–∑–Ω–µ—Å‚Äë–∫–ª—é—á–µ–π (HK –¥–ª—è Hubs).
   * –°–æ–∑–¥–∞—ë–º/–æ–±–Ω–æ–≤–ª—è–µ–º **Hubs** ‚Äî –µ—Å–ª–∏ –±–∏–∑–Ω–µ—Å‚Äë–∫–ª—é—á –Ω–æ–≤—ã–π, –∑–∞–≤–æ–¥–∏–º –∑–∞–ø–∏—Å—å.
   * –°–æ–∑–¥–∞—ë–º/–æ–±–Ω–æ–≤–ª—è–µ–º **Links** ‚Äî —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏.
   * –î–ª—è **Satellites** —Å—á–∏—Ç–∞–µ–º `hashdiff` –ø–æ –∞—Ç—Ä–∏–±—É—Ç–∞–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏
     —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —á—Ç–æ‚Äë—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å.

3. **Business Vault ‚Äî –±–∏–∑–Ω–µ—Å‚Äë–ø—Ä–∞–≤–∏–ª–∞ –∏ —É—Å–∫–æ—Ä–∏—Ç–µ–ª–∏**

   * –°—Ç—Ä–æ–∏–º PIT‚Äë—Ç–∞–±–ª–∏—Ü—ã, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á–∞—Ç—å —Å—Ä–µ–∑ ¬´–Ω–∞ –¥–∞—Ç—É X¬ª.
   * –°—Ç—Ä–æ–∏–º Bridge‚Äë—Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫ —Å–≤—è–∑–µ–π.
   * –í—ã—á–∏—Å–ª—è–µ–º —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –±–∏–∑–Ω–µ—Å‚Äë—Ñ–ª–∞–≥–∏ –∏ derived‚Äë–∞—Ç—Ä–∏–±—É—Ç—ã (–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —Å–µ–≥–º–µ–Ω—Ç—ã, —Å—Ç–∞—Ç—É—Å—ã).

4. **DM / Star Schema ‚Äî –≤–∏—Ç—Ä–∏–Ω—ã –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**

   * –ù–∞ –æ—Å–Ω–æ–≤–µ BV —Å–æ–±–∏—Ä–∞–µ–º —Ñ–∞–∫—Ç—ã –∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ó–≤–µ–∑–¥—ã.
   * –ü–æ–¥ —ç—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è BI‚Äë–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å, –¥–∞—à–±–æ—Ä–¥—ã.

–ß–µ–º —ç—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ ¬´STG ‚Üí ODS ‚Üí DDS ‚Üí DM¬ª:

* —Å–ª–æ–π DDS –≤ DV‚Äë–ø–æ–¥—Ö–æ–¥–µ —á–∞—Å—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ **Raw+Business Vault**;
* –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π ¬´–±–æ–ª—å—à–æ–π¬ª –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã —è–¥—Ä–∞ —É –Ω–∞—Å –Ω–∞–±–æ—Ä Lego‚Äë–º–æ–¥—É–ª–µ–π (Hubs/Links/Sats);
* –∑–∞ —Å—á—ë—Ç —Ö—ç—à‚Äë–∫–ª—é—á–µ–π –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–º–µ–Ω–æ–≤ –ø–∞–π–ø–ª–∞–π–Ω—ã –ø—Ä–æ—â–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å
  –∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –ø–æ –∫–æ–º–∞–Ω–¥–∞–º.

DV –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç STG/ODS/DM ‚Äî –æ–Ω —Å–∫–æ—Ä–µ–µ **—Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç —Å–ª–æ–π DDS –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ –∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–µ—Ç–∞–ª–∏**.

## 8. –ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã Data Vault

### 8.1. –ü–ª—é—Å—ã

* üìú **–ò—Å—Ç–æ—Ä–∏—è ¬´–∏–∑ –∫–æ—Ä–æ–±–∫–∏¬ª**
  –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ —Å–∞—Ç–µ–ª–ª–∏—Ç–µ. –ù–∏—á–µ–≥–æ –Ω–µ –ø–µ—Ä–µ–∑–∞—Ç–∏—Ä–∞–µ—Ç—Å—è.

* üß© **–õ—ë–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**
  –ù–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å —Ç–µ–º–∏ –∂–µ —Å—É—â–Ω–æ—Å—Ç—è–º–∏ = –Ω–æ–≤—ã–µ —Å–∞—Ç–µ–ª–ª–∏—Ç—ã –∫ —Ç–µ–º –∂–µ —Ö–∞–±–∞–º.

* üîé **–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∏ –∞—É–¥–∏—Ç**
  –í–∏–¥–Ω–æ, –∏–∑ –∫–∞–∫–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞, –∫–æ–≥–¥–∞ –∏ —Å –∫–∞–∫–∏–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –ø—Ä–∏–ª–µ—Ç–µ–ª–∞ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞.

* üë• **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥**
  –†–∞–∑–Ω—ã–µ –¥–æ–º–µ–Ω—ã –≤ DV –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.

### 8.2. –ú–∏–Ω—É—Å—ã

* üß† **–í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞**
  –ù—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å SCD, —Ö—ç—à‚Äë–∫–ª—é—á–∏, –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ JOIN, –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∑–∞–≥—Ä—É–∑–∫–∏.

* üìà **–ë–æ–ª—å—à–µ —Ç–∞–±–ª–∏—Ü –∏ JOIN‚Äô–æ–≤**
  –î–∞–∂–µ –ø—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ ¬´HUB + LINK + 2‚Äì3 SAT + PIT¬ª.

* üõ† **–ù—É–∂–Ω–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞**
  –ó–∞–±—ã–ª–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å `record_source`/`load_dttm` ‚Äî –ø–æ—Ç–µ—Ä—è–ª–∏ —á–∞—Å—Ç—å –∞—É–¥–∏—Ç–∞.

* ‚è≥ **–ü–ª–æ—Ö–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è MVP**
  –î–ª—è 2‚Äì3 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ DV –æ–±—ã—á–Ω–æ –¥–æ—Ä–æ–∂–µ, —á–µ–º –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è 3NF/–ó–≤–µ–∑–¥–∞.

## 9. –ö–æ–≥–¥–∞ DV —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∞ –∫–æ–≥–¥–∞ –Ω–µ—Ç

### –ü–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏:

* —É –≤–∞—Å **–∑–æ–æ–ø–∞—Ä–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** (5+ —Å–∏—Å—Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –µ—â—ë –∏ –º–µ–Ω—è—é—Ç—Å—è);
* –≤–∞–∂–Ω–∞ **–ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏ –∞—É–¥–∏—Ç** (—Ñ–∏–Ω—Ç–µ—Ö, –≥–æ—Å, —Ç–µ–ª–µ–∫–æ–º, –∫—Ä—É–ø–Ω—ã–π –±–∞–Ω–∫);
* –∫–æ–º–∞–Ω–¥–∞ –Ω–∞—Ü–µ–ª–µ–Ω–∞ –Ω–∞ –¥–æ–ª–≥—É—é –∂–∏–∑–Ω—å DWH, –∞ –Ω–µ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –æ—Ç—á—ë—Ç;
* –µ—Å—Ç—å –ª—é–¥–∏, –≥–æ—Ç–æ–≤—ã–µ –∂–∏—Ç—å –≤ —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ (–∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä, data engineer‚Äô—ã).

### –õ—É—á—à–µ –Ω–µ –Ω–∞—á–∏–Ω–∞—Ç—å —Å DV, –µ—Å–ª–∏:

* —ç—Ç–æ **–ø–µ—Ä–≤—ã–π DWH –≤ –∫–æ–º–ø–∞–Ω–∏–∏**;
* 1‚Äì3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –Ω–µ—Ç –∂—ë—Å—Ç–∫–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–æ –∞—É–¥–∏—Ç—É;
* –∫–æ–º–∞–Ω–¥–∞ –º–∞–ª–∞—è (1‚Äì2 –∏–Ω–∂–µ–Ω–µ—Ä–∞ + –∞–Ω–∞–ª–∏—Ç–∏–∫) –∏ —Å—Ä–æ–∫–∏ –∂–º—É—Ç;
* –∑–∞–¥–∞—á–∞ –∑–≤—É—á–∏—Ç –∫–∞–∫ ¬´–¥–∞–π—Ç–µ –æ—Ç—á—ë—Ç—ã –∫ –∫–≤–∞—Ä—Ç–∞–ª—É¬ª, –∞ –Ω–µ ¬´–ø–æ—Å—Ç—Ä–æ–∏–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –Ω–∞ 5 –ª–µ—Ç¬ª.

–í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —á–µ—Å—Ç–Ω–µ–µ (–∏ –¥–µ—à–µ–≤–ª–µ) –Ω–∞—á–∞—Ç—å —Å:

> `stg ‚Üí ods ‚Üí dds (3NF/–ø—Ä–æ—Å—Ç–∞—è –ó–≤–µ–∑–¥–∞ —Å SCD2) ‚Üí dm (–ó–≤–µ–∑–¥–∞)`

–ê DV –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥, –∫–æ–≥–¥–∞ –ø–æ—è–≤—è—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –±–æ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω —Ä–µ—à–∞–µ—Ç.
